
IAM User/Group
一、整体在讲什么？（先给你一句话版）

这段内容在讲：如何通过 IAM 用户（User）和用户组（Group）来安全、可扩展地管理 AWS 访问权限，尤其是创建一个“管理员用户 + 管理员用户组”。

二、核心概念解释（非常重要）
1️⃣ 什么是 IAM User（IAM 用户）？

IAM User = 一个“具体的人或程序”的 AWS 身份

每个 IAM 用户都有 唯一身份

可以通过：

用户名 + 密码（登录 Console）

Access Key（CLI / SDK）

IAM 用户本身 没有权限

权限来自 IAM Policy（策略）

📌 举例：

Alice 是一个 IAM user

她可以：

访问 S3

创建 EC2

读写 DynamoDB
👉 这些能力 必须通过 policy 授权

2️⃣ 什么是 IAM Group（IAM 用户组）？

IAM Group = 一组有“相同权限”的用户集合

你把 policy 绑定到 group

所有加入这个 group 的用户：

自动拥有相同权限

用户 本身不直接绑定权限（最佳实践）

📌 举例：

建一个 group 叫 Admins

给这个 group 绑定 AdministratorAccess

所有加入 Admins 的用户 = 管理员权限

三、为什么要用 IAM Group？（为什么不是直接给 user 权限）
❌ 不好的方式

每个用户单独配 policy

改权限要一个个改

容易出错、不一致

✅ 推荐方式（AWS best practice）

权限 绑定在 Group 上

用户只负责加入 / 移除 Group

👉 更安全 + 更可维护 + 更适合规模化

四、两种创建方式（文中提到的）
方法一：AWS Management Console（图形界面）

适合：初学者 / 手动操作

流程是：

进入 IAM

创建 Group（比如 Admins）

给 Group 绑定 policy（如 AdministratorAccess）

创建 User

把 User 加入 Group

方法二：AWS CLI（命令行）

适合：自动化 / DevOps / 大规模管理

常用命令包括：

查看用户属于哪些组：

aws iam list-groups-for-user --user-name Alice


验证用户是否有某个权限（不会真的执行）：

aws iam simulate-principal-policy \
  --policy-source-arn arn:aws:iam::123456789012:user/Alice \
  --action-names ec2:StartInstances


📌 这个命令在：

Debug 权限问题

面试时说“我会怎么确认权限”
👉 非常加分

五、什么是 IAM Admin User + Group？
IAM Admin Group

一个 IAM Group

绑定 AdministratorAccess policy

拥有几乎所有 AWS 权限

IAM Admin User

一个普通 IAM User

但加入了 Admin Group

👉 通过 group 间接获得管理员权限

📌 最佳实践

不用 root account 做日常操作

用 IAM admin user 代替 root

六、Key Takeaways 用人话总结

IAM User：一个具体的身份（人 / 程序）

IAM Group：一组拥有相同权限的用户

权限 = Policy

Policy 绑定在 Group 上，而不是 User 上

Console 适合手动，CLI 适合自动化

用 CLI + simulate-policy 可以安全验证权限

Admin 权限也应该通过 Group 管理

七、你在面试可以这样一句话说（非常专业）

In AWS, IAM users represent individual identities, while IAM groups are used to manage permissions at scale by attaching policies once and applying them consistently across multiple users.

