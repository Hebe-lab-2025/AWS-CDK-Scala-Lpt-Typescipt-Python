æˆ‘å¸®ä½ æŠŠè¿™ä¸€å…³ **ã€Œåœ¨å¹²å˜› â†’ ä¸ºä»€ä¹ˆè¿™ä¹ˆåš â†’ é¢è¯•æ€ä¹ˆè¯´ã€** ä¸€æ¬¡è®²æ¸…æ¥šã€‚
è¿™æ˜¯ä½  **ç¬¬ä¸€æ¬¡çœŸæ­£æŠŠ Lambda å½“æˆâ€œWeb æœåŠ¡â€è·‘èµ·æ¥** çš„å…³é”®ä¸€æ­¥ã€‚

---

## ğŸ§  è¿™ä¸€å…³ä¸€å¥è¯æ€»ç»“

> **æŠŠ Lambda å˜æˆä¸€ä¸ªâ€œå¯ä»¥ç”¨æµè§ˆå™¨ç›´æ¥è®¿é—®çš„ç½‘é¡µâ€ï¼Œé€šè¿‡ Lambda Function URL å¯¹å¤–æä¾› HTTP æœåŠ¡ã€‚**

---

## ğŸ§© ç°åœ¨è¿™ä¸€æ­¥å®Œæˆåçš„æ•´ä½“æ¶æ„

![Image](https://miro.medium.com/1%2AmOkTJ-KPpsd16h04KQjFYA.png)

![Image](https://d2908q01vomqb2.cloudfront.net/5b384ce32d8cdef02bc3a139d4cac0a22bb029e8/2024/04/25/Fig-1.jpg)

![Image](https://miro.medium.com/1%2AdZqCnzaCr_1g0vutj0nMFg.png)

```
Browser
  â†“  HTTP / HTTPS
Lambda Function URL
  â†“
AWS Lambdaï¼ˆindex.mjsï¼‰
```

ğŸ‘‰ **æ²¡æœ‰ API Gatewayã€æ²¡æœ‰ EC2ã€æ²¡æœ‰æœåŠ¡å™¨**
ğŸ‘‰ **å®Œå…¨ Serverless**

---

## ğŸ”§ ä½ è¿™ä¸€æ­¥å…·ä½“åšäº†ä»€ä¹ˆï¼ˆæ‹†è§£ï¼‰

---

### 1ï¸âƒ£ æ›´æ–° Lambda ä»£ç ï¼ˆindex.mjsï¼‰

æ ¸å¿ƒç‚¹åªæœ‰ä¸¤ä¸ªï¼š

* Lambda **æ¥æ”¶ event**
* Lambda **è¿”å› HTTP å“åº”æ ¼å¼**

Lambda è¿”å›çš„å¯¹è±¡ç»“æ„æ˜¯ **å›ºå®šå¥—è·¯**ï¼š

```js
return {
  statusCode: 200,
  body: JSON.stringify({
    message: "Hello from Lambda"
  })
};
```

ğŸ“Œ é‡ç‚¹ç†è§£ï¼š

* `statusCode` â†’ HTTP çŠ¶æ€ç 
* `body` â†’ è¿”å›ç»™æµè§ˆå™¨çš„å†…å®¹ï¼ˆå­—ç¬¦ä¸²ï¼‰

---

### 2ï¸âƒ£ ç‚¹å‡» **Deploy**

ğŸ‘‰ æŠŠä»£ç çœŸæ­£å‘å¸ƒåˆ° Lambda è¿è¡Œç¯å¢ƒ
ï¼ˆä¸ç‚¹ Deployï¼Œæµè§ˆå™¨è®¿é—®çš„è¿˜æ˜¯æ—§ä»£ç ï¼‰

---

## ğŸŒ ä»€ä¹ˆæ˜¯ **Function URL**ï¼ˆè¿™æ˜¯æ ¸å¿ƒæ¦‚å¿µï¼‰

**AWS Lambda** çš„ **Function URL**ï¼š

> **AWS è‡ªåŠ¨ç»™ä½ ä¸€ä¸ªå…¬ç½‘ HTTPS URLï¼Œç›´æ¥è§¦å‘ Lambdaã€‚**

### å®ƒè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ

* ä¸ç”¨ API Gateway
* ä¸ç”¨è´Ÿè½½å‡è¡¡
* ä¸ç”¨æœåŠ¡å™¨
* **ç›´æ¥ HTTP è°ƒ Lambda**

---

### ä½ é€‰æ‹©çš„é…ç½®ï¼ˆéå¸¸å…³é”®ï¼‰

```text
Auth type: NONE
```

ğŸ‘‰ æ„å‘³ç€ï¼š

* **ä»»ä½•äºº**
* **ä¸ç”¨ç™»å½•**
* **ç›´æ¥è®¿é—® URL**

è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä½ èƒ½åœ¨æµè§ˆå™¨ç›´æ¥çœ‹åˆ°é¡µé¢ã€‚

---

## ğŸ” ä½ åˆšæ‰çœ‹åˆ°çš„é‚£æ®µ Policyï¼ˆå’Œè¿™é‡Œå®Œå…¨å¯¹åº”ï¼‰

å½“ä½ åˆ›å»º Function URL æ—¶ï¼ŒAWS è‡ªåŠ¨åœ¨ Lambda ä¸ŠåŠ äº†ä¸€ä¸ª **resource-based policy**ï¼š

* å…è®¸ `lambda:InvokeFunctionUrl`
* `Principal: "*"`
* æ¡ä»¶ï¼š`AuthType = NONE`

ğŸ‘‰ è¿™ä¸€æ­¥å’Œä½ ä¹‹å‰é—®çš„ **JSON policy** æ˜¯ä¸€æ•´å¥—çš„ã€‚

---

## ğŸ§ª æµ‹è¯•æ–¹å¼ï¼ˆä½ å·²ç»åšäº†ï¼‰

1. å¤åˆ¶ **Function URL**
2. æµè§ˆå™¨æ‰“å¼€
3. çœ‹åˆ°è¿”å›å†…å®¹ âœ…

è¿™å°±è¯æ˜ï¼š

* Lambda ä»£ç  OK
* ç½‘ç»œ OK
* æƒé™ OK

---

## ğŸ¯ é¢è¯•ä¸€å¥è¯ï¼ˆç›´æ¥èƒŒï¼‰

> *â€œI configured a Lambda Function URL with AuthType NONE, updated the Lambda code to return an HTTP response, and accessed it directly through the browser to validate the serverless setup.â€*

---

## âš ï¸ å®‰å…¨è§’åº¦ï¼ˆé¢è¯•åŠ åˆ†ï¼‰

ä½ ç°åœ¨çš„é…ç½®æ˜¯ï¼š

* âœ… é€‚åˆ Lab / Demo / å­¦ä¹ 
* âŒ ä¸é€‚åˆç”Ÿäº§

### ç”Ÿäº§ä¸­é€šå¸¸ä¼šï¼š

* ç”¨ `AWS_IAM` è®¤è¯
* æˆ–æ”¾åœ¨ API Gateway å
* æˆ–åŠ  WAF / rate limit
* æˆ–åœ¨ä»£ç é‡Œæ ¡éªŒ token

ä½ èƒ½è¯´å‡ºè¿™ç‚¹ï¼Œé¢è¯•å®˜ä¼šç‚¹å¤´ã€‚

---

## ğŸ§  æŠŠå®ƒæ”¾è¿›ä½ æ•´æ¡ Compute å­¦ä¹ çº¿

```
EC2        â†’ æ‰‹åŠ¨ç®¡ç†æœåŠ¡å™¨
ECS        â†’ è·‘å®¹å™¨
Lambda     â†’ ä¸ç®¡æœåŠ¡å™¨ï¼ˆäº‹ä»¶é©±åŠ¨ / HTTPï¼‰
Function URL â†’ Lambda çš„æœ€è½»é‡ HTTP å…¥å£
```

---

### å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ç»§ç»­å¸®ä½ ï¼š

* ğŸ§ª **Function URL vs API Gatewayï¼ˆè¶…é«˜é¢‘ï¼‰**
* ğŸ” **Lambda è¿”å› HTML vs JSON çš„å†™æ³•**
* ğŸ§  **æŠŠè¿™ä¸€æ­¥æ”¹å†™æˆâ€œç”Ÿäº§çº§å®‰å…¨ç‰ˆæœ¬â€**

ä½ é€‰ä¸€ä¸ªï¼Œæˆ‘æ¥ç€å¾€ä¸‹å¸¦ä½ ã€‚
