## ğŸ§  1) AWS æ¶æ„ â†” OOP æ¨¡å‹ï¼ˆä¸€å¼ â€œç±»å›¾å¼â€å…¨æ™¯ï¼‰

> è®°å¿†æ³•ï¼š**CloudFormation = class factory**ï¼›**Stack = object graph**ï¼›**Resource = instance**ã€‚

```text
+------------------------+            +-------------------------+
| InfrastructureTemplate |<----------- |  CloudFormation (Factory)|
|  (Class / Blueprint)   |  create()   +-------------------------+
|  - Parameters          |
|  - Resources[]         |                         creates
|  - Outputs             |------------------------------------+
+------------------------+                                    |
                                                              v
                                                     +----------------+
                                                     |     Stack      |
                                                     | (Object Graph) |
                                                     | - id           |
                                                     | - resources[]  |
                                                     +----------------+
                                                              |
                                                              | contains instances of
                                                              v
  +--------------------+     has-a     +---------------------+     uses     +------------------+
  |        VPC         |-------------> |       Subnet        |----------->  |   Route Table    |
  | (NetworkBoundary)  |              | (AZ-scoped segment)  |             | (routing rules)  |
  +--------------------+              +---------------------+              +------------------+
           |                                   |
           | contains                           | attaches
           v                                   v
  +--------------------+                +---------------------+
  |   Security Group   |                |      ENI/NIC       |
  | (stateful rules)   |                | (network interface) |
  +--------------------+                +---------------------+
           |                                   |
           | applied to                          | bound to
           v                                   v
  +--------------------+    pulls image from   +---------------------+
  |   ECS Service      |---------------------->|        ECR          |
  | (desired count)    |                       | (image registry)    |
  +--------------------+                       +---------------------+
           |
           | runs
           v
  +--------------------+     defines     +---------------------+
  |   ECS Task         |<----------------|  Task Definition    |
  | (container runtime)|                 | (container blueprint)|
  +--------------------+                 +---------------------+

  +--------------------+   exposes HTTP   +---------------------+
  |   Lambda Function  |<-----------------|   Function URL      |
  | (code + runtime)   |                  | (public endpoint)   |
  +--------------------+                  +---------------------+

  +--------------------+   attaches   +---------------------+
  |        EC2         |------------->|        EBS          |
  | (VM instance)      |              | (block disk)        |
  +--------------------+              +---------------------+
```

### ä½ éœ€è¦ç‰¢ç‰¢è®°ä½çš„ 3 ä¸ª OOP å¯¹åº”

* **Templateï¼ˆCFN/Terraform configï¼‰= Class / Blueprint**
* **Stack / Workspace = Object Graphï¼ˆä¸€æ¬¡éƒ¨ç½²çš„â€œå¯¹è±¡é›†åˆâ€ï¼‰**
* **Resource = Instanceï¼ˆVPC/EC2/ECS Service è¿™äº›éƒ½æ˜¯å¯¹è±¡å®ä¾‹ï¼‰**

---

## ğŸ§ª 2) 5 é“â€œç±» vs å®ä¾‹â€ AWS ç§’æ€é¢˜ï¼ˆå¸¦æ ‡å‡†ç­”æ¡ˆï¼‰

1. **CloudFormation template æ˜¯ç±»è¿˜æ˜¯å®ä¾‹ï¼ŸStack å‘¢ï¼Ÿ**
   âœ… Template = **ç±»**ï¼›Stack = **å®ä¾‹ï¼ˆå¯¹è±¡å›¾ï¼‰**ã€‚

2. **åŒä¸€ä¸ª template éƒ¨ç½²ä¸¤æ¬¡ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ**
   âœ… ç”Ÿæˆ **ä¸¤ä¸ª Stackï¼ˆä¸¤å¥—ç‹¬ç«‹èµ„æºå®ä¾‹ï¼‰**ï¼Œèµ„æºå/ID ä¸åŒã€‚

3. **ECS Task Definition vs ECS Taskï¼šè°æ˜¯ç±»è°æ˜¯å®ä¾‹ï¼Ÿ**
   âœ… Task Definition = **ç±»**ï¼›Task = **å®ä¾‹**ï¼ˆè¿è¡Œä¸­çš„å®¹å™¨ä»»åŠ¡ï¼‰ã€‚

4. **AMI vs EC2 Instanceï¼šè°æ˜¯ç±»è°æ˜¯å®ä¾‹ï¼Ÿ**
   âœ… AMI = **ç±»/é•œåƒè“å›¾**ï¼›EC2 Instance = **å®ä¾‹**ã€‚

5. **Security Group Rule ä¿®æ”¹ï¼Œå½±å“â€œç±»â€è¿˜æ˜¯â€œå®ä¾‹â€ï¼Ÿ**
   âœ… å½±å“ **å®ä¾‹ï¼ˆå½“å‰è¿™ä¸€ä¸ª SG å¯¹è±¡ï¼‰**ï¼›ä½†å¦‚æœä½ ç”¨ IaC ç®¡ç†ï¼Œåˆ™ä¼šå›å†™åˆ°â€œç±»â€ï¼ˆtemplateï¼‰è®©æœªæ¥ä¿æŒä¸€è‡´ã€‚

---

## ğŸ”„ 3) ç”¨ OOP æ€ç»´è§£é‡Š IaCï¼ˆCloudFormation / Terraformï¼‰

### æ ¸å¿ƒç±»æ¯”ï¼ˆé¢è¯•ä¸€å¥è¯ï¼‰

> **IaC å°±æ˜¯ç”¨ä»£ç å®šä¹‰å¯¹è±¡æ¨¡å‹ï¼ˆclassesï¼‰ï¼Œå†é€šè¿‡å¼•æ“å®ä¾‹åŒ–æˆçœŸå®äº‘èµ„æºï¼ˆobjectsï¼‰ï¼Œå¹¶æŒç»­åšâ€œçŠ¶æ€å¯¹é½â€ã€‚**

---

### (A) CloudFormationï¼šæ›´åƒâ€œæ„é€ å‡½æ•° + æ‰˜ç®¡å¯¹è±¡ç”Ÿå‘½å‘¨æœŸâ€

* **Template**ï¼šç±»å®šä¹‰ï¼ˆå±æ€§ã€ä¾èµ–ã€è¾“å‡ºï¼‰
* **Stack Create/Update/Delete**ï¼šæ„é€  / ä¿®æ”¹ / ææ„
* **Drift Detection**ï¼šæ£€æµ‹å¯¹è±¡æ˜¯å¦è¢«æ‰‹åŠ¨æ”¹åï¼ˆå®ä¾‹çŠ¶æ€åç¦»ç±»ï¼‰

**ä¸€å¥è¯ï¼š**

> CFN æ˜¯ **å£°æ˜å¼ OOP**ï¼šä½ æè¿°â€œåº”è¯¥æ˜¯ä»€ä¹ˆâ€ï¼ŒAWS è´Ÿè´£å˜æˆé‚£æ ·ã€‚

---

### (B) Terraformï¼šæ›´åƒâ€œçŠ¶æ€æœº + diff é©±åŠ¨çš„å¯¹è±¡ç®¡ç†â€

* `*.tf`ï¼šç±»å®šä¹‰ï¼ˆèµ„æºå£°æ˜ï¼‰
* `terraform plan`ï¼šåš diffï¼ˆåƒ compare current vs desiredï¼‰
* `terraform apply`ï¼šæŒ‰ diff æ”¹å®ä¾‹
* `terraform state`ï¼šå¯¹è±¡å®ä¾‹çš„â€œè¿è¡Œæ—¶å¿«ç…§/å¼•ç”¨è¡¨â€ï¼ˆéå¸¸åƒå¯¹è±¡å¼•ç”¨è¡¨ï¼‰

**ä¸€å¥è¯ï¼š**

> Terraform æ˜¯ **å£°æ˜å¼ + æ˜¾å¼çŠ¶æ€ç®¡ç†**ï¼šå®ƒç”¨ state è®°ä½â€œæˆ‘åˆ›å»ºè¿‡å“ªäº›å¯¹è±¡â€ã€‚

---

### (C) ç±»çš„â€œå­—æ®µâ€å¯¹åº”åˆ° AWS çš„ä»€ä¹ˆï¼Ÿ

* class fieldsï¼ˆå±æ€§ï¼‰â†’ `VPC CIDR`, `Subnet CIDR`, `desiredCount`, `runtime`, `policy`
* referencesï¼ˆå¯¹è±¡å¼•ç”¨ï¼‰â†’ `!Ref`, `!GetAtt`, ä¾èµ–å…³ç³»
* compositionï¼ˆç»„åˆï¼‰â†’ VPC has-a Subnetï¼›ECS Service has-a TaskDefinition
* encapsulationï¼ˆå°è£…ï¼‰â†’ Module/Stack æŠŠå¤æ‚èµ„æºå°è£…æˆå¯å¤ç”¨ç»„ä»¶

---

## ğŸ§  ä½ è¦çš„â€œåç†è§£â€è·¯çº¿ï¼šä¸€æ¡ä¸»çº¿æŠ“ä½å°±å¤Ÿ

> **â€œæˆ‘ä¸æ˜¯ç‚¹æ§åˆ¶å°åˆ›å»ºèµ„æºï¼Œæˆ‘æ˜¯åœ¨å®šä¹‰å¯¹è±¡æ¨¡å‹ï¼Œç„¶åè®©å¼•æ“å¸®æˆ‘å®ä¾‹åŒ–å¹¶ä¿æŒä¸€è‡´ã€‚â€**

---

å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘ä¸‹ä¸€æ­¥å¯ä»¥æŠŠä¸Šé¢è¿™å¼ â€œç±»å›¾å¼â€æ¶æ„ï¼Œæ”¹æˆæ›´åƒ UML çš„ç‰ˆæœ¬ï¼ˆå« `has-a / uses / depends-on` æ ‡æ³¨ï¼‰ï¼Œå¹¶ç»™ä½ ä¸€æ®µ 30 ç§’é¢è¯•å£æ’­ç­”æ¡ˆï¼ˆéå¸¸å¥½èƒŒï¼‰ã€‚
